"use strict";function testing(a){function b(){var a=$("#"+e.testingContainerId);a.empty();var b=$("<h1>"+f.testTitle+"</h1>"),d=$('<div class="testing-form"></div>');d.append(b),f.pages.forEach(function(a,b){var g=$('<div class="testing-form__page"></div>');g.attr("id","page-"+b),g.toggle(!1);var h=$("<h2>"+a.pageTitle+"</h2>");g.append(h);var i=$('<ol class="testing-form__question-list"></ol>');g.append(i),a.questions.forEach(function(a,c){var d=$('<li class="testing-form__question-item"></li>');d.html(a.questionTitle),i.append(d);var e=$('<ol class="testing-form__variant-list"></ol>');d.append(e);var f="multiple"==a.questionType?"checkbox":"radio";a.variants.forEach(function(a,d){var g=$('<li class="testing-form__variant-item"></li>'),h=$("<label></label>"),i=a.variantTitle,j=$("<input/>");j.attr("type",f);var k="p"+b+"_q"+c+"_v"+d,l="radio"==f?"p"+b+"_q"+c:k;j.attr("id",k),j.attr("name",l),h.append(j),g.append(h),e.append(g),h.append(i)})});var j=$('<div class="testing-form__page-button-wrapper"></div>');if(g.append(j),b>0){var k=$('<button class="testing-form__page-button">Назад</button>');k.attr("data-current-page",b).css({display:"inline-block"}),k.on("click",function(){var a="#page-"+$(this).data("current-page"),b="#page-"+(+$(this).data("current-page")-1);$(a).toggle(!1),$(b).toggle(!0)}),j.append(k)}if(b<f.pages.length-1){var l=$('<button class="testing-form__page-button">Вперед</button>');l.attr("data-current-page",b).css({display:"inline-block"}),j.append(l),l.on("click",function(){var a="#page-"+$(this).data("current-page"),b="#page-"+(+$(this).data("current-page")+1);$(a).toggle(!1),$(b).toggle(!0)})}if(b==f.pages.length-1){var m=$('<button class="testing-form__page-button">Закончить</button>');m.attr("data-current-page",-1).css({display:"inline-block"}),j.append(m),m.on("click",function(){e.beforeFinishTest?e.beforeFinishTest()&&c():c()})}d.append(g)}),a.append(d),$("#page-0").toggle(!0)}function c(){var a=0,b=0;f.pages.forEach(function(c,d){c.questions.forEach(function(c,e){var f=!0;c.variants.forEach(function(a,b){f=f&&a.variantResult===$("#p"+d+"_q"+e+"_v"+b).prop("checked")}),f?a++:b++})});var c={correctResultCount:a,wrongResultCount:b};e.afterCheckResult&&e.afterCheckResult(c)}var d={testingContainerId:"",testingObject:"",beforeStartTest:"",beforeFinishTest:"",afterCheckResult:""},e=$.extend(d,a),f=JSON.parse(localStorage.getItem(e.testingObject));return b(),this}$(function(){function a(){return confirm("Закончить тест и проверить результаты ?")}function b(a){$("#correct-result-count").html("Правильных ответов: "+a.correctResultCount),$("#wrong-result-count").html("Ошибочных ответов: "+a.wrongResultCount),$("#result-modal").one("hidden.bs.modal",function(){confirm("Пройти еще раз ?")&&$("body").runTesting(d)}),$("#result-modal").modal()}var c={testTitle:"Тест по программированию",pages:[{pageTitle:"Тест по программированию. Блок вопросов №1",questions:[{questionTitle:"Вопрос №1-1",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!0},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №1-2",questionType:"singlton",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!1},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №1-3",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!0},{variantTitle:"Вариант ответа №2",variantResult:!1},{variantTitle:"Вариант ответа №3",variantResult:!0}]}]},{pageTitle:"Тест по программированию. Блок вопросов №2",questions:[{questionTitle:"Вопрос №2-1",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!0},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №2-2",questionType:"singlton",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!1},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №2-3",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!0},{variantTitle:"Вариант ответа №2",variantResult:!1},{variantTitle:"Вариант ответа №3",variantResult:!0}]}]},{pageTitle:"Тест по программированию. Блок вопросов №3",questions:[{questionTitle:"Вопрос №3-1",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!0},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №3-2",questionType:"singlton",variants:[{variantTitle:"Вариант ответа №1",variantResult:!1},{variantTitle:"Вариант ответа №2",variantResult:!1},{variantTitle:"Вариант ответа №3",variantResult:!0}]},{questionTitle:"Вопрос №3-3",questionType:"multiple",variants:[{variantTitle:"Вариант ответа №1",variantResult:!0},{variantTitle:"Вариант ответа №2",variantResult:!0},{variantTitle:"Вариант ответа №3",variantResult:!1}]}]}]};localStorage.removeItem("myTest"),localStorage.setItem("myTest",JSON.stringify(c));var d={testingContainerId:"testing-place",testingObject:"myTest",beforeFinishTest:a,afterCheckResult:b};$("body").runTesting(d)}),function(a){a.fn.runTesting=testing}(jQuery);